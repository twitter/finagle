<!DOCTYPE html ><html><head><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"/><title></title><meta content="" name="description"/><meta content="" name="keywords"/><meta http-equiv="content-type" content="text/html; charset=UTF-8"/><link href="../../../../lib/index.css" media="screen" type="text/css" rel="stylesheet"/><link href="../../../../lib/template.css" media="screen" type="text/css" rel="stylesheet"/><link href="../../../../lib/print.css" media="print" type="text/css" rel="stylesheet"/><link href="../../../../lib/diagrams.css" media="screen" type="text/css" rel="stylesheet" id="diagrams-css"/><script type="text/javascript" src="../../../../lib/jquery.min.js"></script><script type="text/javascript" src="../../../../lib/index.js"></script><script type="text/javascript" src="../../../../index.js"></script><script type="text/javascript" src="../../../../lib/scheduler.js"></script><script type="text/javascript" src="../../../../lib/template.js"></script><script type="text/javascript">/* this variable can be used by the JS to determine the path to the root document */
var toRoot = '../../../../';</script></head><body><div id="search"><span id="doc-title"><span id="doc-version"></span></span> <span class="close-results"><span class="left">&lt;</span> Back</span><div id="textfilter"><span class="input"><input autocapitalize="none" placeholder="Search" id="index-input" type="text" accesskey="/"/><i class="clear material-icons"></i><i id="search-icon" class="material-icons"></i></span></div></div><div id="search-results"><div id="search-progress"><div id="progress-fill"></div></div><div id="results-content"><div id="entity-results"></div><div id="member-results"></div></div></div><div id="content-scroll-container" style="-webkit-overflow-scrolling: touch;"><div id="content-container" style="-webkit-overflow-scrolling: touch;"><div id="subpackage-spacer"><div id="packages"><h1>Packages</h1><ul><li class="indented0 " name="_root_.root" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="_root_" class="anchorToMember"></a><a id="root:_root_" class="anchorToMember"></a> <span class="permalink"><a href="../../../../index.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><a href="../../../../index.html" title=""><span class="name">root</span></a></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd><a href="../../../../index.html" name="_root_" id="_root_" class="extype">root</a></dd></dl></div></li><li class="indented1 " name="_root_.com" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="com" class="anchorToMember"></a><a id="com:com" class="anchorToMember"></a> <span class="permalink"><a href="../../../../com/index.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><a href="../../../index.html" title=""><span class="name">com</span></a></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd><a href="../../../../index.html" name="_root_" id="_root_" class="extype">root</a></dd></dl></div></li><li class="indented2 " name="com.twitter" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="twitter" class="anchorToMember"></a><a id="twitter:twitter" class="anchorToMember"></a> <span class="permalink"><a href="../../../../com/twitter/index.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><a href="../../index.html" title="Start with com.twitter.finagle."><span class="name">twitter</span></a></span><p class="shortcomment cmt">Start with <a href="../index.html" name="com.twitter.finagle" id="com.twitter.finagle" class="extype">com.twitter.finagle</a>.</p><div class="fullcomment"><div class="comment cmt"><p>Start with <a href="../index.html" name="com.twitter.finagle" id="com.twitter.finagle" class="extype">com.twitter.finagle</a>.</p></div><dl class="attributes block"><dt>Definition Classes</dt><dd><a href="../../../index.html" name="com" id="com" class="extype">com</a></dd></dl></div></li><li class="indented3 " name="com.twitter.finagle" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="finagle" class="anchorToMember"></a><a id="finagle:finagle" class="anchorToMember"></a> <span class="permalink"><a href="../../../../com/twitter/finagle/index.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><a href="../index.html" title="Finagle is an extensible RPC system."><span class="name">finagle</span></a></span><p class="shortcomment cmt">Finagle is an extensible RPC system.</p><div class="fullcomment"><div class="comment cmt"><p>Finagle is an extensible RPC system.</p><p>Services are represented by class <a href="../Service.html" name="com.twitter.finagle.Service" id="com.twitter.finagle.Service" class="extype">com.twitter.finagle.Service</a>. Clients make use of
<a href="../Service.html" name="com.twitter.finagle.Service" id="com.twitter.finagle.Service" class="extype">com.twitter.finagle.Service</a> objects while servers implement them.</p><p>Finagle contains a number of protocol implementations; each of these implement
<a href="../Client.html" name="com.twitter.finagle.Client" id="com.twitter.finagle.Client" class="extype">Client</a> and/or <a href="../Server.html" name="com.twitter.finagle.Server" id="com.twitter.finagle.Server" class="extype">com.twitter.finagle.Server</a>. For example, Finagle's
HTTP implementation, <a href="../Http$.html" name="com.twitter.finagle.Http" id="com.twitter.finagle.Http" class="extype">com.twitter.finagle.Http</a> (in package <code>finagle-http</code>), exposes both.</p><p>Thus a simple HTTP server is built like this:</p><pre><span class="kw">import</span> com.twitter.finagle.{Http, Service}
<span class="kw">import</span> com.twitter.finagle.http.{Request, Response}
<span class="kw">import</span> com.twitter.util.{Await, Future}

<span class="kw">val</span> service = <span class="kw">new</span> Service[Request, Response] {
  <span class="kw">def</span> apply(req: Request): Future[Response] =
    Future.value(Response())
}
<span class="kw">val</span> server = Http.server.serve(<span class="lit">":8080"</span>, service)
Await.ready(server)</pre><p>We first define a service to which requests are dispatched. In this case, the service returns
immediately with a HTTP 200 OK response, and with no content.</p><p>This service is then served via the Http protocol on TCP port 8080. Finally we wait for the server
to stop serving.</p><p>We can now query our web server:</p><pre>% curl -D - localhost:<span class="num">8080</span>
HTTP/<span class="num">1.1</span> <span class="num">200</span> OK</pre><p>Building an HTTP client is also simple. (Note that type annotations are added for illustration.)</p><pre><span class="kw">import</span> com.twitter.finagle.{Http, Service}
<span class="kw">import</span> com.twitter.finagle.http.{Request, Response}
<span class="kw">import</span> com.twitter.util.{Future, Return, Throw}

<span class="kw">val</span> client: Service[Request, Response] = Http.client.newService(<span class="lit">"localhost:8080"</span>)
<span class="kw">val</span> f: Future[Response] = client(Request()).respond {
  <span class="kw">case</span> Return(rep) <span class="kw">=&gt;</span>
    printf(<span class="lit">"Got HTTP response %s\n"</span>, rep)
  <span class="kw">case</span> Throw(exc) <span class="kw">=&gt;</span>
    printf(<span class="lit">"Got error %s\n"</span>, exc)
}</pre><p><code>Http.client.newService("localhost:8080")</code> constructs a new <a href="../Service.html" name="com.twitter.finagle.Service" id="com.twitter.finagle.Service" class="extype">com.twitter.finagle.Service</a> instance
connected to localhost TCP port 8080. We then issue a HTTP/1.1 GET request to URI "/". The service
returns a <a href="https://twitter.github.io/util/docs/com/twitter/util/Future.html" name="com.twitter.util.Future" id="com.twitter.util.Future" class="extype">com.twitter.util.Future</a> representing the result of the operation. We listen to this
future, printing an appropriate message when the response arrives.</p><p>The <a href="https://twitter.github.io/finagle/" target="_blank">Finagle homepage</a> contains useful documentation and
resources for using Finagle.
</p></div><dl class="attributes block"><dt>Definition Classes</dt><dd><a href="../../index.html" name="com.twitter" id="com.twitter" class="extype">twitter</a></dd></dl></div></li><li class="indented4 " name="com.twitter.finagle.loadbalancer" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="loadbalancer" class="anchorToMember"></a><a id="loadbalancer:loadbalancer" class="anchorToMember"></a> <span class="permalink"><a href="../../../../com/twitter/finagle/loadbalancer/index.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><a href="index.html" title="This package implements client side load balancing algorithms."><span class="name">loadbalancer</span></a></span><p class="shortcomment cmt">This package implements client side load balancing algorithms.</p><div class="fullcomment"><div class="comment cmt"><p>This package implements client side load balancing algorithms.</p><p>As an end-user, see the <a href="" name="com.twitter.finagle.loadbalancer.Balancers" id="com.twitter.finagle.loadbalancer.Balancers" class="extype">Balancers</a> API to create instances which can be
used to configure a Finagle client with various load balancing strategies.</p><p>As an implementor, each algorithm gets its own subdirectory and is exposed
via the <a href="" name="com.twitter.finagle.loadbalancer.Balancers" id="com.twitter.finagle.loadbalancer.Balancers" class="extype">Balancers</a> object. Several convenient traits are provided which factor
out common behavior and can be mixed in (i.e. Balancer, DistributorT, NodeT,
and Updating).
</p></div><dl class="attributes block"><dt>Definition Classes</dt><dd><a href="../index.html" name="com.twitter.finagle" id="com.twitter.finagle" class="extype">finagle</a></dd></dl></div></li><li class="indented5 " name="com.twitter.finagle.loadbalancer.aperture" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="aperture" class="anchorToMember"></a><a id="aperture:aperture" class="anchorToMember"></a> <span class="permalink"><a href="../../../../com/twitter/finagle/loadbalancer/aperture/index.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><a href="aperture/index.html" title=""><span class="name">aperture</span></a></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd><a href="index.html" name="com.twitter.finagle.loadbalancer" id="com.twitter.finagle.loadbalancer" class="extype">loadbalancer</a></dd></dl></div></li><li class="indented5 " name="com.twitter.finagle.loadbalancer.distributor" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="distributor" class="anchorToMember"></a><a id="distributor:distributor" class="anchorToMember"></a> <span class="permalink"><a href="../../../../com/twitter/finagle/loadbalancer/distributor/index.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><a href="distributor/index.html" title=""><span class="name">distributor</span></a></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd><a href="index.html" name="com.twitter.finagle.loadbalancer" id="com.twitter.finagle.loadbalancer" class="extype">loadbalancer</a></dd></dl></div></li><li class="indented5 " name="com.twitter.finagle.loadbalancer.exp" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="exp" class="anchorToMember"></a><a id="exp:exp" class="anchorToMember"></a> <span class="permalink"><a href="../../../../com/twitter/finagle/loadbalancer/exp/index.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><a href="exp/index.html" title=""><span class="name">exp</span></a></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd><a href="index.html" name="com.twitter.finagle.loadbalancer" id="com.twitter.finagle.loadbalancer" class="extype">loadbalancer</a></dd></dl></div></li><li class="current-entities indented4"><a href="BalancerRegistry$.html" title="" class="object"></a> <a href="BalancerRegistry.html" title="A registry of load balancers currently in use." class="class"></a><a href="BalancerRegistry.html" title="A registry of load balancers currently in use.">BalancerRegistry</a></li><li class="current-entities indented4"><span class="separator"></span> <a href="" title="Constructor methods for various load balancers." class="object"></a><a href="" title="Constructor methods for various load balancers.">Balancers</a></li><li class="current-entities indented4"><span class="separator"></span> <a href="EndpointFactory.html" title="A specialized ServiceFactory which admits that it backs a concrete endpoint." class="trait"></a><a href="EndpointFactory.html" title="A specialized ServiceFactory which admits that it backs a concrete endpoint.">EndpointFactory</a></li><li class="current-entities indented4"><span class="separator"></span> <a href="FlagBalancerFactory$.html" title="A LoadBalancerFactory proxy which instantiates the underlying based on flags (see flags.scala for applicable flags)." class="object"></a><a href="FlagBalancerFactory$.html" title="A LoadBalancerFactory proxy which instantiates the underlying based on flags (see flags.scala for applicable flags).">FlagBalancerFactory</a></li><li class="current-entities indented4"><a href="LoadBalancerFactory$.html" title="Exposes a Stack.Module which composes load balancing into the respective Stack." class="object"></a> <a href="LoadBalancerFactory.html" title="A thin interface around a Balancer's constructor that allows Finagle to pass in context from the stack to the balancers at construction time." class="class"></a><a href="LoadBalancerFactory.html" title="A thin interface around a Balancer's constructor that allows Finagle to pass in context from the stack to the balancers at construction time.">LoadBalancerFactory</a></li><li class="current-entities indented4"><span class="separator"></span> <a href="Metadata.html" title="Information about a load balancer." class="class"></a><a href="Metadata.html" title="Information about a load balancer.">Metadata</a></li><li class="current-entities indented4"><a href="PanicMode$.html" title="Panic mode is when the LB gives up trying to find a healthy node." class="object"></a> <a href="PanicMode.html" title="" class="class"></a><a href="PanicMode.html" title="">PanicMode</a></li><li class="current-entities indented4"><span class="separator"></span> <a href="defaultBalancer$.html" title="A GlobalFlag that changes the default balancer for every client in the process." class="object"></a><a href="defaultBalancer$.html" title="A GlobalFlag that changes the default balancer for every client in the process.">defaultBalancer</a></li><li class="current-entities indented4"><span class="separator"></span> <a href="perHostStats$.html" title="A GlobalFlag which allows the configuration of per host (or endpoint) stats to be toggled." class="object"></a><a href="perHostStats$.html" title="A GlobalFlag which allows the configuration of per host (or endpoint) stats to be toggled.">perHostStats</a></li></ul></div></div><div id="content"><body class="object value"><div id="definition"><div class="big-circle object">o</div><p id="owner"><a href="../../../index.html" name="com" id="com" class="extype">com</a>.<a href="../../index.html" name="com.twitter" id="com.twitter" class="extype">twitter</a>.<a href="../index.html" name="com.twitter.finagle" id="com.twitter.finagle" class="extype">finagle</a>.<a href="index.html" name="com.twitter.finagle.loadbalancer" id="com.twitter.finagle.loadbalancer" class="extype">loadbalancer</a></p><h1>Balancers<span class="permalink"><a href="../../../../com/twitter/finagle/loadbalancer/Balancers$.html" title="Permalink"><i class="material-icons"></i></a></span></h1><h3><span class="morelinks"></span></h3></div><h4 id="signature" class="signature"><span class="modifier_kind"><span class="modifier"></span> <span class="kind">object</span></span> <span class="symbol"><span class="name">Balancers</span></span></h4><div id="comment" class="fullcommenttop"><div class="comment cmt"><p>Constructor methods for various load balancers. The methods take balancer
specific parameters and return a <a href="LoadBalancerFactory.html" name="com.twitter.finagle.loadbalancer.LoadBalancerFactory" id="com.twitter.finagle.loadbalancer.LoadBalancerFactory" class="extype">LoadBalancerFactory</a> that allows you
to easily inject a balancer into the Finagle client stack via the
<code>withLoadBalancer</code> method.
</p></div><dl class="attributes block"><div class="block">Example:<ol><li class="cmt"><p>configuring a client with a load balancer</p><pre>$Protocol.client
  .withLoadBalancer(Balancers.aperture())
  .newClient(...)</pre></li></ol></div><dt>See also</dt><dd><span class="cmt"><p>The <a href="https://twitter.github.io/finagle/guide/Clients.html#load-balancing" target="_blank">user guide</a>
for more details.</p></span></dd></dl><div class="toggleContainer"><div class="toggle block"><span>Linear Supertypes</span><div class="superTypes hiddenContent"><a href="https://www.scala-lang.org/api/2.13.6/scala/AnyRef.html#scala.AnyRef" name="scala.AnyRef" id="scala.AnyRef" class="extype">AnyRef</a>, <a href="https://www.scala-lang.org/api/2.13.6/scala/Any.html#scala.Any" name="scala.Any" id="scala.Any" class="extype">Any</a></div></div></div></div><div id="mbrsel"><div class="toggle"></div><div id="memberfilter"><i class="material-icons arrow"></i><span class="input"><input placeholder="Filter all members" id="mbrsel-input" type="text" accesskey="/"/></span><i class="clear material-icons"></i></div><div id="filterby"><div id="order"><span class="filtertype">Ordering</span><ol><li class="alpha in"><span>Alphabetic</span></li><li class="inherit out"><span>By Inheritance</span></li></ol></div><div class="ancestors"><span class="filtertype">Inherited<br/></span><ol id="linearization"><li class="in" name="com.twitter.finagle.loadbalancer.Balancers"><span>Balancers</span></li><li class="in" name="scala.AnyRef"><span>AnyRef</span></li><li class="in" name="scala.Any"><span>Any</span></li></ol></div><div class="ancestors"><span class="filtertype"></span><ol><li class="hideall out"><span>Hide All</span></li><li class="showall in"><span>Show All</span></li></ol></div><div id="visbl"><span class="filtertype">Visibility</span><ol><li class="public in"><span>Public</span></li><li class="protected out"><span>Protected</span></li></ol></div></div></div><div id="template"><div id="allMembers"><div class="values members"><h3>Value Members</h3><ol><li class="indented0 " name="scala.AnyRef#!=" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="!=(x$1:Any):Boolean" class="anchorToMember"></a><a id="!=(Any):Boolean" class="anchorToMember"></a> <span class="permalink"><a href="../../../../com/twitter/finagle/loadbalancer/Balancers$.html#!=(x$1:Any):Boolean" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">final </span> <span class="kind">def</span></span> <span class="symbol"><span class="name" title="gt4s: $bang$eq">!=</span><span class="params">(<span name="arg0">arg0: <a href="https://www.scala-lang.org/api/2.13.6/scala/Any.html#scala.Any" name="scala.Any" id="scala.Any" class="extype">Any</a></span>)</span><span class="result">: <a href="https://www.scala-lang.org/api/2.13.6/scala/Boolean.html#scala.Boolean" name="scala.Boolean" id="scala.Boolean" class="extype">Boolean</a></span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd>AnyRef → Any</dd></dl></div></li><li class="indented0 " name="scala.AnyRef###" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="##:Int" class="anchorToMember"></a> <span class="permalink"><a href="../../../../com/twitter/finagle/loadbalancer/Balancers$.html###:Int" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">final </span> <span class="kind">def</span></span> <span class="symbol"><span class="name" title="gt4s: $hash$hash">##</span><span class="result">: <a href="https://www.scala-lang.org/api/2.13.6/scala/Int.html#scala.Int" name="scala.Int" id="scala.Int" class="extype">Int</a></span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd>AnyRef → Any</dd></dl></div></li><li class="indented0 " name="scala.AnyRef#==" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="==(x$1:Any):Boolean" class="anchorToMember"></a><a id="==(Any):Boolean" class="anchorToMember"></a> <span class="permalink"><a href="../../../../com/twitter/finagle/loadbalancer/Balancers$.html#==(x$1:Any):Boolean" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">final </span> <span class="kind">def</span></span> <span class="symbol"><span class="name" title="gt4s: $eq$eq">==</span><span class="params">(<span name="arg0">arg0: <a href="https://www.scala-lang.org/api/2.13.6/scala/Any.html#scala.Any" name="scala.Any" id="scala.Any" class="extype">Any</a></span>)</span><span class="result">: <a href="https://www.scala-lang.org/api/2.13.6/scala/Boolean.html#scala.Boolean" name="scala.Boolean" id="scala.Boolean" class="extype">Boolean</a></span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd>AnyRef → Any</dd></dl></div></li><li class="indented0 " name="com.twitter.finagle.loadbalancer.Balancers#aperture" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="aperture(smoothWin:com.twitter.util.Duration,lowLoad:Double,highLoad:Double,minAperture:Int,rng:com.twitter.finagle.util.Rng,useDeterministicOrdering:Option[Boolean]):com.twitter.finagle.loadbalancer.LoadBalancerFactory" class="anchorToMember"></a><a id="aperture(Duration,Double,Double,Int,Rng,Option[Boolean]):LoadBalancerFactory" class="anchorToMember"></a> <span class="permalink"><a href="../../../../com/twitter/finagle/loadbalancer/Balancers$.html#aperture(smoothWin:com.twitter.util.Duration,lowLoad:Double,highLoad:Double,minAperture:Int,rng:com.twitter.finagle.util.Rng,useDeterministicOrdering:Option[Boolean]):com.twitter.finagle.loadbalancer.LoadBalancerFactory" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">aperture</span><span class="params">(<span name="smoothWin">smoothWin: <a href="https://twitter.github.io/util/docs/com/twitter/util/Duration.html#com.twitter.util.Duration" name="com.twitter.util.Duration" id="com.twitter.util.Duration" class="extype">Duration</a> = <span class="symbol"><span class="name"><a href="../../../index.html">15.seconds</a></span></span></span>, <span name="lowLoad">lowLoad: <a href="https://www.scala-lang.org/api/2.13.6/scala/Double.html#scala.Double" name="scala.Double" id="scala.Double" class="extype">Double</a> = <span class="symbol">0.875</span></span>, <span name="highLoad">highLoad: <a href="https://www.scala-lang.org/api/2.13.6/scala/Double.html#scala.Double" name="scala.Double" id="scala.Double" class="extype">Double</a> = <span class="symbol">1.125</span></span>, <span name="minAperture">minAperture: <a href="https://www.scala-lang.org/api/2.13.6/scala/Int.html#scala.Int" name="scala.Int" id="scala.Int" class="extype">Int</a> = <span class="symbol">1</span></span>, <span name="rng">rng: <a href="../util/Rng.html" name="com.twitter.finagle.util.Rng" id="com.twitter.finagle.util.Rng" class="extype">Rng</a> = <span class="symbol"><span class="name"><a href="../../../index.html">Rng.threadLocal</a></span></span></span>, <span name="useDeterministicOrdering">useDeterministicOrdering: <a href="https://www.scala-lang.org/api/2.13.6/scala/Option.html#scala.Option" name="scala.Option" id="scala.Option" class="extype">Option</a>[<a href="https://www.scala-lang.org/api/2.13.6/scala/Boolean.html#scala.Boolean" name="scala.Boolean" id="scala.Boolean" class="extype">Boolean</a>] = <span class="symbol">None</span></span>)</span><span class="result">: <a href="LoadBalancerFactory.html" name="com.twitter.finagle.loadbalancer.LoadBalancerFactory" id="com.twitter.finagle.loadbalancer.LoadBalancerFactory" class="extype">LoadBalancerFactory</a></span></span><p class="shortcomment cmt">The aperture load-band balancer balances load to the smallest subset ("aperture") of
services so that the concurrent load to each service, measured over a window specified
by <code>smoothWin</code>, stays within the load band delimited by <code>lowLoad</code> and <code>highLoad</code>.</p><div class="fullcomment"><div class="comment cmt"><p>The aperture load-band balancer balances load to the smallest subset ("aperture") of
services so that the concurrent load to each service, measured over a window specified
by <code>smoothWin</code>, stays within the load band delimited by <code>lowLoad</code> and <code>highLoad</code>.</p><p>The default load band configuration attempts to create a 1:1 relationship between
a client's offered load and the aperture size. Given a homogeneous replica set – this
optimizes for at least one concurrent request per node and gives the balancer
sufficient data to compare load across nodes.</p><p>Among the benefits of aperture balancing are:</p><ol class="decimal"><li>A client uses resources commensurate to offered load. In particular,
    it does not have to open sessions with every service in a large cluster.
    This is especially important when offered load and cluster capacity
    are mismatched.
 2. It balances over fewer, and thus warmer, services. This enhances the
    efficacy of the fail-fast mechanisms, etc. This also means that clients pay
    the penalty of session establishment less frequently.
 3. It increases the efficacy of least-loaded balancing which, in order to
    work well, requires concurrent load. The load-band balancer effectively
    arranges load in a manner that ensures a higher level of per-service
    concurrency.
</li></ol></div><dl class="paramcmts block"><dt class="param">smoothWin</dt><dd class="cmt"><p>The time window to use when calculating the rps observed by this
load balancer instance. The smoothed rps value is then used to determine the size of
the aperture (along with the <code>lowLoad</code> and <code>highLoad</code> parameters).</p></dd><dt class="param">lowLoad</dt><dd class="cmt"><p>The lower threshold on average load (as calculated by rps over
smooth window / # of endpoints). Once this threshold is reached, the aperture is
narrowed. Put differently, if there is an average of <code>lowLoad</code> requests across
the endpoints, then we are not concentrating our concurrency well, so we narrow
the aperture.</p></dd><dt class="param">highLoad</dt><dd class="cmt"><p>The upper threshold on average load (as calculated by rps / #
of instances). Once this threshold is reached, the aperture is widened. Put differently,
if there is an average of <code>highLoad</code> requests across the endpoints, then we are
over subscribing the endpoints and need to widen the aperture.</p></dd><dt class="param">minAperture</dt><dd class="cmt"><p>The minimum aperture allowed. Note, this value is checked to
ensure that it is not larger than the number of endpoints.</p></dd><dt class="param">rng</dt><dd class="cmt"><p>The PRNG used for flipping coins. Override for
deterministic tests.</p></dd><dt class="param">useDeterministicOrdering</dt><dd class="cmt"><p>Enables the aperture instance to make use of
the coordinate in <a href="aperture/ProcessCoordinate$.html" name="com.twitter.finagle.loadbalancer.aperture.ProcessCoordinate" id="com.twitter.finagle.loadbalancer.aperture.ProcessCoordinate" class="extype">com.twitter.finagle.loadbalancer.aperture.ProcessCoordinate</a> to
calculate an order for the endpoints. In short, this allows coordination for apertures
across process boundaries to avoid load concentration when deployed in a distributed system.</p></dd></dl><dl class="attributes block"><dt>See also</dt><dd><span class="cmt"><p>The <a href="https://twitter.github.io/finagle/guide/Clients.html#aperture-least-loaded" target="_blank">user guide</a>
for more details.</p></span></dd></dl></div></li><li class="indented0 " name="com.twitter.finagle.loadbalancer.Balancers#aperturePeakEwma" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="aperturePeakEwma(smoothWin:com.twitter.util.Duration,lowLoad:Double,highLoad:Double,minAperture:Int,rng:com.twitter.finagle.util.Rng,useDeterministicOrdering:Option[Boolean]):com.twitter.finagle.loadbalancer.LoadBalancerFactory" class="anchorToMember"></a><a id="aperturePeakEwma(Duration,Double,Double,Int,Rng,Option[Boolean]):LoadBalancerFactory" class="anchorToMember"></a> <span class="permalink"><a href="../../../../com/twitter/finagle/loadbalancer/Balancers$.html#aperturePeakEwma(smoothWin:com.twitter.util.Duration,lowLoad:Double,highLoad:Double,minAperture:Int,rng:com.twitter.finagle.util.Rng,useDeterministicOrdering:Option[Boolean]):com.twitter.finagle.loadbalancer.LoadBalancerFactory" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">aperturePeakEwma</span><span class="params">(<span name="smoothWin">smoothWin: <a href="https://twitter.github.io/util/docs/com/twitter/util/Duration.html#com.twitter.util.Duration" name="com.twitter.util.Duration" id="com.twitter.util.Duration" class="extype">Duration</a> = <span class="symbol"><span class="name"><a href="../../../index.html">15.seconds</a></span></span></span>, <span name="lowLoad">lowLoad: <a href="https://www.scala-lang.org/api/2.13.6/scala/Double.html#scala.Double" name="scala.Double" id="scala.Double" class="extype">Double</a> = <span class="symbol">0.875</span></span>, <span name="highLoad">highLoad: <a href="https://www.scala-lang.org/api/2.13.6/scala/Double.html#scala.Double" name="scala.Double" id="scala.Double" class="extype">Double</a> = <span class="symbol">1.125</span></span>, <span name="minAperture">minAperture: <a href="https://www.scala-lang.org/api/2.13.6/scala/Int.html#scala.Int" name="scala.Int" id="scala.Int" class="extype">Int</a> = <span class="symbol">1</span></span>, <span name="rng">rng: <a href="../util/Rng.html" name="com.twitter.finagle.util.Rng" id="com.twitter.finagle.util.Rng" class="extype">Rng</a> = <span class="symbol"><span class="name"><a href="../../../index.html">Rng.threadLocal</a></span></span></span>, <span name="useDeterministicOrdering">useDeterministicOrdering: <a href="https://www.scala-lang.org/api/2.13.6/scala/Option.html#scala.Option" name="scala.Option" id="scala.Option" class="extype">Option</a>[<a href="https://www.scala-lang.org/api/2.13.6/scala/Boolean.html#scala.Boolean" name="scala.Boolean" id="scala.Boolean" class="extype">Boolean</a>] = <span class="symbol">None</span></span>)</span><span class="result">: <a href="LoadBalancerFactory.html" name="com.twitter.finagle.loadbalancer.LoadBalancerFactory" id="com.twitter.finagle.loadbalancer.LoadBalancerFactory" class="extype">LoadBalancerFactory</a></span></span><p class="shortcomment cmt">Like <a href="#aperture(smoothWin:com.twitter.util.Duration,lowLoad:Double,highLoad:Double,minAperture:Int,rng:com.twitter.finagle.util.Rng,useDeterministicOrdering:Option[Boolean]):com.twitter.finagle.loadbalancer.LoadBalancerFactory" name="com.twitter.finagle.loadbalancer.Balancers#aperture" id="com.twitter.finagle.loadbalancer.Balancers#aperture" class="extmbr">aperture</a> but but using the Peak EWMA (exponentially weight moving average)
load metric.</p><div class="fullcomment"><div class="comment cmt"><p>Like <a href="#aperture(smoothWin:com.twitter.util.Duration,lowLoad:Double,highLoad:Double,minAperture:Int,rng:com.twitter.finagle.util.Rng,useDeterministicOrdering:Option[Boolean]):com.twitter.finagle.loadbalancer.LoadBalancerFactory" name="com.twitter.finagle.loadbalancer.Balancers#aperture" id="com.twitter.finagle.loadbalancer.Balancers#aperture" class="extmbr">aperture</a> but but using the Peak EWMA (exponentially weight moving average)
load metric.</p><p>Peak EWMA uses a moving average over an endpoint's round-trip time (RTT) that is
highly sensitive to peaks. This average is then weighted by the number of outstanding
requests. Effectively, increasing our resolution per-request and providing a higher
fidelity measurement of server responsiveness compared to the standard least loaded.
It is designed to react to slow endpoints more quickly than least-loaded by penalizing
them when they exhibit slow response times. This load metric operates under the
assumption that a loaded endpoint takes time to recover and so it is generally safe
for the advertised load to incorporate an endpoint's history. However, this
assumption breaks down in the presence of long polling clients.
</p></div><dl class="paramcmts block"><dt class="param">smoothWin</dt><dd class="cmt"><p>The time window to use when calculating the rps observed by this
load balancer instance. The smoothed rps value is used to determine the size of
aperture (along with the lowLoad and highLoad parameters). In the context of
peakEwma, this value is also used to average over the latency observed per endpoint.
It's unlikely that you would want to measure the latency on a different time scale
than rps, so we couple the two.</p></dd><dt class="param">lowLoad</dt><dd class="cmt"><p>The lower threshold on average load (as calculated by rps over
smooth window / # of endpoints). Once this threshold is reached, the aperture is
narrowed. Put differently, if there is an average of <code>lowLoad</code> requests across
the endpoints, then we are not concentrating our concurrency well, so we narrow
the aperture.</p></dd><dt class="param">highLoad</dt><dd class="cmt"><p>The upper threshold on average load (as calculated by rps / #
of instances). Once this threshold is reached, the aperture is widened. Put differently,
if there is an average of <code>highLoad</code> requests across the endpoints, then we are
over subscribing the endpoints and need to widen the aperture.</p></dd><dt class="param">minAperture</dt><dd class="cmt"><p>The minimum aperture allowed. Note, this value is checked to
ensure that it is not larger than the number of endpoints.</p></dd><dt class="param">rng</dt><dd class="cmt"><p>The PRNG used for flipping coins. Override for
deterministic tests.</p></dd><dt class="param">useDeterministicOrdering</dt><dd class="cmt"><p>Enables the aperture instance to make use of
the coordinate in <a href="aperture/ProcessCoordinate$.html" name="com.twitter.finagle.loadbalancer.aperture.ProcessCoordinate" id="com.twitter.finagle.loadbalancer.aperture.ProcessCoordinate" class="extype">com.twitter.finagle.loadbalancer.aperture.ProcessCoordinate</a> to
calculate an order for the endpoints. In short, this allows coordination for apertures
across process boundaries to avoid load concentration when deployed in a distributed system.</p></dd></dl><dl class="attributes block"><dt>See also</dt><dd><span class="cmt"><p>The <a href="https://twitter.github.io/finagle/guide/Clients.html#aperture-least-loaded" target="_blank">user guide</a>
for more details.</p></span></dd></dl></div></li><li class="indented0 " name="scala.Any#asInstanceOf" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="asInstanceOf[T0]:T0" class="anchorToMember"></a> <span class="permalink"><a href="../../../../com/twitter/finagle/loadbalancer/Balancers$.html#asInstanceOf[T0]:T0" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">final </span> <span class="kind">def</span></span> <span class="symbol"><span class="name">asInstanceOf</span><span class="tparams">[<span name="T0">T0</span>]</span><span class="result">: <span name="scala.Any.asInstanceOf.T0" class="extype">T0</span></span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd>Any</dd></dl></div></li><li class="indented0 " name="scala.AnyRef#clone" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="prt"><a id="clone():Object" class="anchorToMember"></a><a id="clone():AnyRef" class="anchorToMember"></a> <span class="permalink"><a href="../../../../com/twitter/finagle/loadbalancer/Balancers$.html#clone():Object" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">clone</span><span class="params">()</span><span class="result">: <a href="https://www.scala-lang.org/api/2.13.6/scala/AnyRef.html#scala.AnyRef" name="scala.AnyRef" id="scala.AnyRef" class="extype">AnyRef</a></span></span><div class="fullcomment"><dl class="attributes block"><dt>Attributes</dt><dd>protected[<span name="java.lang" class="extype">lang</span>] </dd><dt>Definition Classes</dt><dd>AnyRef</dd><dt>Annotations</dt><dd><span class="name">@throws</span><span class="args">(<span><span class="defval">classOf[java.lang.CloneNotSupportedException]</span></span>)</span> <span class="name">@native</span><span class="args">()</span> </dd></dl></div></li><li class="indented0 " name="scala.AnyRef#eq" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="eq(x$1:AnyRef):Boolean" class="anchorToMember"></a><a id="eq(AnyRef):Boolean" class="anchorToMember"></a> <span class="permalink"><a href="../../../../com/twitter/finagle/loadbalancer/Balancers$.html#eq(x$1:AnyRef):Boolean" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">final </span> <span class="kind">def</span></span> <span class="symbol"><span class="name">eq</span><span class="params">(<span name="arg0">arg0: <a href="https://www.scala-lang.org/api/2.13.6/scala/AnyRef.html#scala.AnyRef" name="scala.AnyRef" id="scala.AnyRef" class="extype">AnyRef</a></span>)</span><span class="result">: <a href="https://www.scala-lang.org/api/2.13.6/scala/Boolean.html#scala.Boolean" name="scala.Boolean" id="scala.Boolean" class="extype">Boolean</a></span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd>AnyRef</dd></dl></div></li><li class="indented0 " name="scala.AnyRef#equals" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="equals(x$1:Object):Boolean" class="anchorToMember"></a><a id="equals(AnyRef):Boolean" class="anchorToMember"></a> <span class="permalink"><a href="../../../../com/twitter/finagle/loadbalancer/Balancers$.html#equals(x$1:Object):Boolean" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">equals</span><span class="params">(<span name="arg0">arg0: <a href="https://www.scala-lang.org/api/2.13.6/scala/AnyRef.html#scala.AnyRef" name="scala.AnyRef" id="scala.AnyRef" class="extype">AnyRef</a></span>)</span><span class="result">: <a href="https://www.scala-lang.org/api/2.13.6/scala/Boolean.html#scala.Boolean" name="scala.Boolean" id="scala.Boolean" class="extype">Boolean</a></span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd>AnyRef → Any</dd></dl></div></li><li class="indented0 " name="scala.AnyRef#finalize" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="prt"><a id="finalize():Unit" class="anchorToMember"></a> <span class="permalink"><a href="../../../../com/twitter/finagle/loadbalancer/Balancers$.html#finalize():Unit" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">finalize</span><span class="params">()</span><span class="result">: <a href="https://www.scala-lang.org/api/2.13.6/scala/Unit.html#scala.Unit" name="scala.Unit" id="scala.Unit" class="extype">Unit</a></span></span><div class="fullcomment"><dl class="attributes block"><dt>Attributes</dt><dd>protected[<span name="java.lang" class="extype">lang</span>] </dd><dt>Definition Classes</dt><dd>AnyRef</dd><dt>Annotations</dt><dd><span class="name">@throws</span><span class="args">(<span><span class="symbol">classOf[java.lang.Throwable]</span></span>)</span> </dd></dl></div></li><li class="indented0 " name="scala.AnyRef#getClass" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="getClass():Class[_]" class="anchorToMember"></a><a id="getClass():Class[_&lt;:AnyRef]" class="anchorToMember"></a> <span class="permalink"><a href="../../../../com/twitter/finagle/loadbalancer/Balancers$.html#getClass():Class[_]" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">final </span> <span class="kind">def</span></span> <span class="symbol"><span class="name">getClass</span><span class="params">()</span><span class="result">: <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#java.lang.Class" name="java.lang.Class" id="java.lang.Class" class="extype">Class</a>[_ &lt;: <a href="https://www.scala-lang.org/api/2.13.6/scala/AnyRef.html#scala.AnyRef" name="scala.AnyRef" id="scala.AnyRef" class="extype">AnyRef</a>]</span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd>AnyRef → Any</dd><dt>Annotations</dt><dd><span class="name">@native</span><span class="args">()</span> </dd></dl></div></li><li class="indented0 " name="scala.AnyRef#hashCode" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="hashCode():Int" class="anchorToMember"></a> <span class="permalink"><a href="../../../../com/twitter/finagle/loadbalancer/Balancers$.html#hashCode():Int" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">hashCode</span><span class="params">()</span><span class="result">: <a href="https://www.scala-lang.org/api/2.13.6/scala/Int.html#scala.Int" name="scala.Int" id="scala.Int" class="extype">Int</a></span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd>AnyRef → Any</dd><dt>Annotations</dt><dd><span class="name">@native</span><span class="args">()</span> </dd></dl></div></li><li class="indented0 " name="com.twitter.finagle.loadbalancer.Balancers#heap" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="heap(rng:scala.util.Random):com.twitter.finagle.loadbalancer.LoadBalancerFactory" class="anchorToMember"></a><a id="heap(Random):LoadBalancerFactory" class="anchorToMember"></a> <span class="permalink"><a href="../../../../com/twitter/finagle/loadbalancer/Balancers$.html#heap(rng:scala.util.Random):com.twitter.finagle.loadbalancer.LoadBalancerFactory" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">heap</span><span class="params">(<span name="rng">rng: <a href="https://www.scala-lang.org/api/2.13.6/scala/util/Random.html#scala.util.Random" name="scala.util.Random" id="scala.util.Random" class="extype">Random</a> = <span class="symbol">new Random</span></span>)</span><span class="result">: <a href="LoadBalancerFactory.html" name="com.twitter.finagle.loadbalancer.LoadBalancerFactory" id="com.twitter.finagle.loadbalancer.LoadBalancerFactory" class="extype">LoadBalancerFactory</a></span></span><p class="shortcomment cmt">An efficient strictly least-loaded balancer that maintains an internal heap to
select least-loaded endpoints.</p><div class="fullcomment"><div class="comment cmt"><p>An efficient strictly least-loaded balancer that maintains an internal heap to
select least-loaded endpoints.
</p></div><dl class="attributes block"><dt>See also</dt><dd><span class="cmt"><p>The <a href="https://twitter.github.io/finagle/guide/Clients.html#heap-least-loaded" target="_blank">user guide</a>
for more details.</p></span></dd></dl></div></li><li class="indented0 " name="scala.Any#isInstanceOf" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="isInstanceOf[T0]:Boolean" class="anchorToMember"></a> <span class="permalink"><a href="../../../../com/twitter/finagle/loadbalancer/Balancers$.html#isInstanceOf[T0]:Boolean" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">final </span> <span class="kind">def</span></span> <span class="symbol"><span class="name">isInstanceOf</span><span class="tparams">[<span name="T0">T0</span>]</span><span class="result">: <a href="https://www.scala-lang.org/api/2.13.6/scala/Boolean.html#scala.Boolean" name="scala.Boolean" id="scala.Boolean" class="extype">Boolean</a></span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd>Any</dd></dl></div></li><li class="indented0 " name="scala.AnyRef#ne" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="ne(x$1:AnyRef):Boolean" class="anchorToMember"></a><a id="ne(AnyRef):Boolean" class="anchorToMember"></a> <span class="permalink"><a href="../../../../com/twitter/finagle/loadbalancer/Balancers$.html#ne(x$1:AnyRef):Boolean" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">final </span> <span class="kind">def</span></span> <span class="symbol"><span class="name">ne</span><span class="params">(<span name="arg0">arg0: <a href="https://www.scala-lang.org/api/2.13.6/scala/AnyRef.html#scala.AnyRef" name="scala.AnyRef" id="scala.AnyRef" class="extype">AnyRef</a></span>)</span><span class="result">: <a href="https://www.scala-lang.org/api/2.13.6/scala/Boolean.html#scala.Boolean" name="scala.Boolean" id="scala.Boolean" class="extype">Boolean</a></span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd>AnyRef</dd></dl></div></li><li class="indented0 " name="scala.AnyRef#notify" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="notify():Unit" class="anchorToMember"></a> <span class="permalink"><a href="../../../../com/twitter/finagle/loadbalancer/Balancers$.html#notify():Unit" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">final </span> <span class="kind">def</span></span> <span class="symbol"><span class="name">notify</span><span class="params">()</span><span class="result">: <a href="https://www.scala-lang.org/api/2.13.6/scala/Unit.html#scala.Unit" name="scala.Unit" id="scala.Unit" class="extype">Unit</a></span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd>AnyRef</dd><dt>Annotations</dt><dd><span class="name">@native</span><span class="args">()</span> </dd></dl></div></li><li class="indented0 " name="scala.AnyRef#notifyAll" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="notifyAll():Unit" class="anchorToMember"></a> <span class="permalink"><a href="../../../../com/twitter/finagle/loadbalancer/Balancers$.html#notifyAll():Unit" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">final </span> <span class="kind">def</span></span> <span class="symbol"><span class="name">notifyAll</span><span class="params">()</span><span class="result">: <a href="https://www.scala-lang.org/api/2.13.6/scala/Unit.html#scala.Unit" name="scala.Unit" id="scala.Unit" class="extype">Unit</a></span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd>AnyRef</dd><dt>Annotations</dt><dd><span class="name">@native</span><span class="args">()</span> </dd></dl></div></li><li class="indented0 " name="com.twitter.finagle.loadbalancer.Balancers#p2c" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="p2c(rng:com.twitter.finagle.util.Rng):com.twitter.finagle.loadbalancer.LoadBalancerFactory" class="anchorToMember"></a><a id="p2c(Rng):LoadBalancerFactory" class="anchorToMember"></a> <span class="permalink"><a href="../../../../com/twitter/finagle/loadbalancer/Balancers$.html#p2c(rng:com.twitter.finagle.util.Rng):com.twitter.finagle.loadbalancer.LoadBalancerFactory" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">p2c</span><span class="params">(<span name="rng">rng: <a href="../util/Rng.html" name="com.twitter.finagle.util.Rng" id="com.twitter.finagle.util.Rng" class="extype">Rng</a> = <span class="symbol"><span class="name"><a href="../../../index.html">Rng.threadLocal</a></span></span></span>)</span><span class="result">: <a href="LoadBalancerFactory.html" name="com.twitter.finagle.loadbalancer.LoadBalancerFactory" id="com.twitter.finagle.loadbalancer.LoadBalancerFactory" class="extype">LoadBalancerFactory</a></span></span><p class="shortcomment cmt">An O(1), concurrent, least-loaded fair load balancer.</p><div class="fullcomment"><div class="comment cmt"><p>An O(1), concurrent, least-loaded fair load balancer. This uses the ideas
behind "power of 2 choices" [1].
</p></div><dl class="paramcmts block"><dt class="param">rng</dt><dd class="cmt"><p>The PRNG used for flipping coins. Override for
deterministic tests.
[1] Michael Mitzenmacher. 2001. The Power of Two Choices in
Randomized Load Balancing. IEEE Trans. Parallel Distrib. Syst. 12,
10 (October 2001), 1094-1104.</p></dd></dl></div></li><li class="indented0 " name="com.twitter.finagle.loadbalancer.Balancers#p2cPeakEwma" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="p2cPeakEwma(decayTime:com.twitter.util.Duration,rng:com.twitter.finagle.util.Rng):com.twitter.finagle.loadbalancer.LoadBalancerFactory" class="anchorToMember"></a><a id="p2cPeakEwma(Duration,Rng):LoadBalancerFactory" class="anchorToMember"></a> <span class="permalink"><a href="../../../../com/twitter/finagle/loadbalancer/Balancers$.html#p2cPeakEwma(decayTime:com.twitter.util.Duration,rng:com.twitter.finagle.util.Rng):com.twitter.finagle.loadbalancer.LoadBalancerFactory" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">p2cPeakEwma</span><span class="params">(<span name="decayTime">decayTime: <a href="https://twitter.github.io/util/docs/com/twitter/util/Duration.html#com.twitter.util.Duration" name="com.twitter.util.Duration" id="com.twitter.util.Duration" class="extype">Duration</a> = <span class="symbol"><span class="name"><a href="../../../index.html">10.seconds</a></span></span></span>, <span name="rng">rng: <a href="../util/Rng.html" name="com.twitter.finagle.util.Rng" id="com.twitter.finagle.util.Rng" class="extype">Rng</a> = <span class="symbol"><span class="name"><a href="../../../index.html">Rng.threadLocal</a></span></span></span>)</span><span class="result">: <a href="LoadBalancerFactory.html" name="com.twitter.finagle.loadbalancer.LoadBalancerFactory" id="com.twitter.finagle.loadbalancer.LoadBalancerFactory" class="extype">LoadBalancerFactory</a></span></span><p class="shortcomment cmt">Like <a href="#p2c(rng:com.twitter.finagle.util.Rng):com.twitter.finagle.loadbalancer.LoadBalancerFactory" name="com.twitter.finagle.loadbalancer.Balancers#p2c" id="com.twitter.finagle.loadbalancer.Balancers#p2c" class="extmbr">p2c</a> but using the Peak EWMA (exponentially weight moving average)
load metric.</p><div class="fullcomment"><div class="comment cmt"><p>Like <a href="#p2c(rng:com.twitter.finagle.util.Rng):com.twitter.finagle.loadbalancer.LoadBalancerFactory" name="com.twitter.finagle.loadbalancer.Balancers#p2c" id="com.twitter.finagle.loadbalancer.Balancers#p2c" class="extmbr">p2c</a> but using the Peak EWMA (exponentially weight moving average)
load metric.</p><p>Peak EWMA uses a moving average over an endpoint's round-trip time (RTT) that is
highly sensitive to peaks. This average is then weighted by the number of outstanding
requests. Effectively, increasing our resolution per-request and providing a higher
fidelity measurement of server responsiveness compared to the standard least loaded.
It is designed to react to slow endpoints more quickly than least-loaded by penalizing
them when they exhibit slow response times. This load metric operates under the
assumption that a loaded endpoint takes time to recover and so it is generally safe
for the advertised load to incorporate an endpoint's history. However, this
assumption breaks down in the presence of long polling clients.
</p></div><dl class="paramcmts block"><dt class="param">decayTime</dt><dd class="cmt"><p>The window of latency observations.</p></dd><dt class="param">rng</dt><dd class="cmt"><p>The PRNG used for flipping coins. Override for
deterministic tests.</p></dd></dl><dl class="attributes block"><dt>See also</dt><dd><span class="cmt"><p>The <a href="https://twitter.github.io/finagle/guide/Clients.html#power-of-two-choices-p2c-least-loaded" target="_blank">user guide</a>
for more details.</p></span></dd></dl></div></li><li class="indented0 " name="com.twitter.finagle.loadbalancer.Balancers#roundRobin" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="roundRobin():com.twitter.finagle.loadbalancer.LoadBalancerFactory" class="anchorToMember"></a><a id="roundRobin():LoadBalancerFactory" class="anchorToMember"></a> <span class="permalink"><a href="../../../../com/twitter/finagle/loadbalancer/Balancers$.html#roundRobin():com.twitter.finagle.loadbalancer.LoadBalancerFactory" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">roundRobin</span><span class="params">()</span><span class="result">: <a href="LoadBalancerFactory.html" name="com.twitter.finagle.loadbalancer.LoadBalancerFactory" id="com.twitter.finagle.loadbalancer.LoadBalancerFactory" class="extype">LoadBalancerFactory</a></span></span><p class="shortcomment cmt">A simple round robin balancer that chooses the next endpoint in the list
for each request.</p><div class="fullcomment"><div class="comment cmt"><p>A simple round robin balancer that chooses the next endpoint in the list
for each request.</p><p>WARNING: Unlike other balancers available in finagle, this does
not take latency into account and will happily direct load to
slow or oversubscribed services. We recommend using one of the
other load balancers for typical production use.
</p></div></div></li><li class="indented0 " name="scala.AnyRef#synchronized" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="synchronized[T0](x$1:=&gt;T0):T0" class="anchorToMember"></a><a id="synchronized[T0](=&gt;T0):T0" class="anchorToMember"></a> <span class="permalink"><a href="../../../../com/twitter/finagle/loadbalancer/Balancers$.html#synchronized[T0](x$1:=&gt;T0):T0" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">final </span> <span class="kind">def</span></span> <span class="symbol"><span class="name">synchronized</span><span class="tparams">[<span name="T0">T0</span>]</span><span class="params">(<span name="arg0">arg0: =&gt; <span name="java.lang.AnyRef.synchronized.T0" class="extype">T0</span></span>)</span><span class="result">: <span name="java.lang.AnyRef.synchronized.T0" class="extype">T0</span></span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd>AnyRef</dd></dl></div></li><li class="indented0 " name="scala.AnyRef#toString" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="toString():String" class="anchorToMember"></a> <span class="permalink"><a href="../../../../com/twitter/finagle/loadbalancer/Balancers$.html#toString():String" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">toString</span><span class="params">()</span><span class="result">: <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#java.lang.String" name="java.lang.String" id="java.lang.String" class="extype">String</a></span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd>AnyRef → Any</dd></dl></div></li><li class="indented0 " name="scala.AnyRef#wait" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="wait():Unit" class="anchorToMember"></a> <span class="permalink"><a href="../../../../com/twitter/finagle/loadbalancer/Balancers$.html#wait():Unit" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">final </span> <span class="kind">def</span></span> <span class="symbol"><span class="name">wait</span><span class="params">()</span><span class="result">: <a href="https://www.scala-lang.org/api/2.13.6/scala/Unit.html#scala.Unit" name="scala.Unit" id="scala.Unit" class="extype">Unit</a></span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd>AnyRef</dd><dt>Annotations</dt><dd><span class="name">@throws</span><span class="args">(<span><span class="defval">classOf[java.lang.InterruptedException]</span></span>)</span> </dd></dl></div></li><li class="indented0 " name="scala.AnyRef#wait" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="wait(x$1:Long,x$2:Int):Unit" class="anchorToMember"></a><a id="wait(Long,Int):Unit" class="anchorToMember"></a> <span class="permalink"><a href="../../../../com/twitter/finagle/loadbalancer/Balancers$.html#wait(x$1:Long,x$2:Int):Unit" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">final </span> <span class="kind">def</span></span> <span class="symbol"><span class="name">wait</span><span class="params">(<span name="arg0">arg0: <a href="https://www.scala-lang.org/api/2.13.6/scala/Long.html#scala.Long" name="scala.Long" id="scala.Long" class="extype">Long</a></span>, <span name="arg1">arg1: <a href="https://www.scala-lang.org/api/2.13.6/scala/Int.html#scala.Int" name="scala.Int" id="scala.Int" class="extype">Int</a></span>)</span><span class="result">: <a href="https://www.scala-lang.org/api/2.13.6/scala/Unit.html#scala.Unit" name="scala.Unit" id="scala.Unit" class="extype">Unit</a></span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd>AnyRef</dd><dt>Annotations</dt><dd><span class="name">@throws</span><span class="args">(<span><span class="defval">classOf[java.lang.InterruptedException]</span></span>)</span> </dd></dl></div></li><li class="indented0 " name="scala.AnyRef#wait" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="wait(x$1:Long):Unit" class="anchorToMember"></a><a id="wait(Long):Unit" class="anchorToMember"></a> <span class="permalink"><a href="../../../../com/twitter/finagle/loadbalancer/Balancers$.html#wait(x$1:Long):Unit" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">final </span> <span class="kind">def</span></span> <span class="symbol"><span class="name">wait</span><span class="params">(<span name="arg0">arg0: <a href="https://www.scala-lang.org/api/2.13.6/scala/Long.html#scala.Long" name="scala.Long" id="scala.Long" class="extype">Long</a></span>)</span><span class="result">: <a href="https://www.scala-lang.org/api/2.13.6/scala/Unit.html#scala.Unit" name="scala.Unit" id="scala.Unit" class="extype">Unit</a></span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd>AnyRef</dd><dt>Annotations</dt><dd><span class="name">@throws</span><span class="args">(<span><span class="defval">classOf[java.lang.InterruptedException]</span></span>)</span> <span class="name">@native</span><span class="args">()</span> </dd></dl></div></li></ol></div></div><div id="inheritedMembers"><div name="scala.AnyRef" class="parent"><h3>Inherited from <a href="https://www.scala-lang.org/api/2.13.6/scala/AnyRef.html#scala.AnyRef" name="scala.AnyRef" id="scala.AnyRef" class="extype">AnyRef</a></h3></div><div name="scala.Any" class="parent"><h3>Inherited from <a href="https://www.scala-lang.org/api/2.13.6/scala/Any.html#scala.Any" name="scala.Any" id="scala.Any" class="extype">Any</a></h3></div></div><div id="groupedMembers"><div name="Ungrouped" class="group"><h3>Ungrouped</h3></div></div></div><div id="tooltip"></div><div id="footer"></div></body></div></div></div></body></html>
